# Deepdown Output Format Specification  

_**Version:** Draft 0.3_

## Purpose

This specification defines a Markdown format intended for use as input to vector stores in Retrieval-Augmented Generation (RAG) workflows. The content is **generated from Deepdown templates** and structured around **JSON Schema**, which makes it broadly compatible with OpenAPI, AsyncAPI, and any other JSON Schema-based sources.

The goal is to produce clean, structured, and AI-optimised content from formal specs — ready for embedding, chunking, and agent context injection.

---

## Structure Overview

Each file represents a **single JSON Schema unit** — an object, property, enum, or complex type. It can also represent a path-level operation if derived from a schema-driven API.

### Required Metadata Block

Start with YAML frontmatter to provide metadata used for filtering and retrieval.

```yaml
---
title: "User Object"
tags: ["schema", "User", "object"]
source: "schemas/user.json#/User"
spec_type: "jsonschema"
deepdown_version: "0.2"
---
```

> `source` should ideally reference a stable JSON Pointer or `$id`.

---

## Markdown Content Guidelines

### Headings

- `#` — Schema name or operation
- `##` — Sections like `Properties`, `Validation`, `Examples`
- `###` — Sub-properties or nested sections

### Properties

Properties of objects should be documented like this:

```markdown
### `email`

- **Type**: `string`
- **Format**: `email`
- **Required**: Yes
- **Description**: The user's email address.
```

Add constraints or extra info like:

- `enum`, `minimum`, `pattern`, `default`, `nullable`, etc.

---

## Suggested Sections

- **Summary**: One or two lines describing what this schema represents.
- **Properties**: For objects only — list each with type, constraints, and description.
- **Validation**: Any rules applied to inputs or fields.
- **References**: `$ref` links to other schema files/components.
- **Examples**: Short JSON blocks to show real-world use.

````markdown
## Example

```json
{
  "id": "user_abc",
  "email": "person@example.com"
}
```
````

---

## Footer Disclaimer

Each generated file **must** end with:

```markdown
---
_This Markdown file was generated using **Deepdown**, a templating format for AI-ready JSON Schema content._  
_Do not edit this file directly — update the `.deepdown` source instead._
---
```

---

## Notes

- YAML-based specs should be converted to JSON before parsing.
- Keep output chunks compact — ideally under 2KB for efficient vector storage.
- Avoid including any live templating syntax (`{{ }}` or logic) in the output.
- Optional fields like `operationId`, `schemaVersion`, or `x-*` extensions are welcome in metadata.
